<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insert Class Full Documentation</title>
  <link rel="stylesheet" href="style.css">


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
  <header>
        <a href="index.html" style="color: white; text-decoration: none;"> <i class="fa-solid fa-arrow-left"></i> </a>
    <span>Insert Class Documentation</span> <button id="modeToggle"> <i class="fas fa-moon"></i></button></header>
  </header>

  <main>
    <h2>Overview</h2>
    <p>
      The <code>Insert</code> class is a PHP query builder designed for securely inserting data into MySQL tables using
      prepared statements. It simplifies the process of constructing <code>INSERT</code> queries by providing a fluent
      interface and automatic sanitization. Key features include:
    </p>
    <ul>
      <li>Safe column and table name sanitization to prevent SQL injection</li>
      <li>Automatic detection of parameter types for secure binding</li>
      <li>Support for single-row inserts</li>
      <li>Retrieval of the inserted row's ID for further processing</li>
    </ul>
    <p>This class ensures secure and efficient data insertion by abstracting raw SQL and handling parameter binding
      automatically, making it ideal for applications requiring robust database interactions.</p>

    <h2>Full Method Reference</h2>

    <div class="method">
      <h3>__construct()</h3>
      <p>Initializes a new instance of the <code>Insert</code> class and establishes a connection to the MySQL database.
        This method sets up the internal state for building the insert query.</p>
      <p><strong>Example:</strong></p>
      <pre>$insert = new Insert();</pre>
      <p><strong>Notes:</strong> Requires a valid database configuration (e.g., host, user, password) to establish a
        connection. Throws an exception if the connection fails.</p>
    </div>

    <div class="method">
      <h3>table(<code>$table</code>)</h3>
      <p>Specifies the target table for the <code>INSERT</code> query. The table name is validated to ensure it contains
        only letters, numbers, and underscores, preventing SQL injection.</p>
      <table class="table">
        <tr>
          <th>Parameter</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>$table</td>
          <td>string</td>
          <td>The name of the table to insert data into</td>
        </tr>
      </table>
      <p><strong>Example:</strong></p>
      <pre>$insert->table('users');</pre>
      <p><strong>Notes:</strong> This method must be called before <code>set</code> or <code>run</code>. Invalid table
        names (e.g., containing special characters) will throw an exception.</p>
    </div>

    <div class="method">
      <h3>set(<code>array $columns, array $values</code>)</h3>
      <p>Defines the columns and corresponding values to be inserted into the table. Column names are sanitized to
        ensure safety, and the class automatically detects the data types of values for proper parameter binding.</p>
      <table class="table">
        <tr>
          <th>Parameter</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>$columns</td>
          <td>array</td>
          <td>List of column names (e.g., ['name', 'email', 'age'])</td>
        </tr>
        <tr>
          <td>$values</td>
          <td>array</td>
          <td>List of values to insert, matching the order of columns</td>
        </tr>
      </table>
      <p><strong>Example:</strong></p>
      <pre>
$insert->set(
  ['name', 'email', 'age'],
  ['John Doe', 'john@example.com', 30]
);
      </pre>
      <p><strong>Notes:</strong> The number of columns must match the number of values. Values are bound using prepared
        statements to prevent SQL injection. Ensure column names exist in the table schema.</p>
    </div>

    <div class="method">
      <h3>run()</h3>
      <p>Executes the <code>INSERT</code> query and returns the ID of the newly inserted row. The query is built using
        the table and columns/values set previously, with parameters securely bound.</p>
      <table class="table">
        <tr>
          <th>Return</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
        <tr>
          <td>Inserted ID</td>
          <td>integer</td>
          <td>The auto-incremented ID of the inserted row</td>
        </tr>
      </table>
      <p><strong>Example:</strong></p>
      <pre>
$id = $insert->run();
echo "Inserted row ID: ".$id;
      </pre>
      <div class="example-output">
        Inserted row ID: 101
      </div>
      <p><strong>Notes:</strong> Throws an exception if the table or columns/values are not set, or if the query fails
        (e.g., due to database constraints). Ensure the table has an auto-incrementing primary key to retrieve a valid
        ID.</p>
    </div>

    <h2>Example Full Insert</h2>
    <p>This example demonstrates how to insert a new user record into the <code>users</code> table and retrieve the
      inserted row's ID.</p>
    <pre>
$insert = new Insert();

$insert->table('users')
       ->set(
           ['name', 'email', 'age'],
           ['Alice', 'alice@example.com', 25]
       );

$id = $insert->run();

echo "New user inserted with ID: ".$id;
    </pre>
    <div class="example-output">
      New user inserted with ID: 102
    </div>
    <p><strong>Notes:</strong> This query inserts a single row into the <code>users</code> table with the specified
      values. The returned ID can be used for subsequent operations, such as linking related records in other tables.
    </p>

  </main>

  <script src="mode.js"></script>
</body>

</html>